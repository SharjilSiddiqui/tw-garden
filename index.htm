<!DOCTYPE html>
<html>
<head>
    <title>TW Garden</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=0.5, width=device-width, viewport-fit=cover" />
    <link rel="preload" href="script.js?v=1763819547545" as="script"/>
<link rel="preload" href="media/panorama_A103D2BE_ABB9_2755_41E4_11C61A969497_0/l/3/0_0.jpg?v=1763819547545" as="image"/>
<link rel="preload" href="media/panorama_A103D2BE_ABB9_2755_41E4_11C61A969497_0/r/3/0_0.jpg?v=1763819547545" as="image"/>
<link rel="preload" href="media/panorama_A103D2BE_ABB9_2755_41E4_11C61A969497_0/u/3/0_0.jpg?v=1763819547545" as="image"/>
<link rel="preload" href="media/panorama_A103D2BE_ABB9_2755_41E4_11C61A969497_0/d/3/0_0.jpg?v=1763819547545" as="image"/>
<link rel="preload" href="media/panorama_A103D2BE_ABB9_2755_41E4_11C61A969497_0/f/3/0_0.jpg?v=1763819547545" as="image"/>
<link rel="preload" href="media/panorama_A103D2BE_ABB9_2755_41E4_11C61A969497_0/b/3/0_0.jpg?v=1763819547545" as="image"/>
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-116087-3", "auto"); ga("send", "pageview");</script>
<meta name="description" content="Virtual Tour"/>
<meta name="theme-color" content="#999999"/>
    <script src="lib/tdvplayer.js?v=1763819547545"></script>
    <script type="text/javascript">
        var player;
        var playersPlayingTmp = [];
        var isInitialized = false;
        var isPaused = false;

        function loadTour()
        {
            if(player)
                return;

            var beginFunc = function(event){
                if(event.name == 'begin')
                {
                    var camera = event.data.source.get('camera');
                    if(camera && camera.get('initialSequence') && camera.get('initialSequence').get('movements').length > 0)
                        return;
                }

                if(event.sourceClassName == "MediaAudio")
                    return;

                isInitialized = true;

                player.unbind('preloadMediaShow', beginFunc, player, true);
                player.unbindOnObjectsOf('PanoramaPlayListItem', 'begin', beginFunc, player, true);
                player.unbind('stateChange', beginFunc, player, true);
                window.parent.postMessage("tourLoaded", '*');

                disposePreloader();

                onVirtualTourLoaded();
            };

            var settings = new TDV.PlayerSettings();
            
            settings.set(TDV.PlayerSettings.CONTAINER, document.getElementById('viewer'));
            settings.set(TDV.PlayerSettings.SCRIPT_URL, 'script.js?v=1763819547545');
            settings.set(TDV.PlayerSettings.WEBVR_POLYFILL_URL, 'lib/WebVRPolyfill.js?v=1763819547545');
            settings.set(TDV.PlayerSettings.HLS_URL, 'lib/Hls.js?v=1763819547545');
            settings.set(TDV.PlayerSettings.QUERY_STRING_PARAMETERS, 'v=1763819547545');
            window.tdvplayer = player = TDV.PlayerAPI.create(settings);
            player.bind('preloadMediaShow', beginFunc, player, true);
            player.bind('stateChange', beginFunc, player, true);
            player.bindOnObjectsOf('PanoramaPlayListItem', 'begin', beginFunc, player, true);
            player.bindOnObject('rootPlayer', 'start', function(e){
                var queryDict = {}; location.search.substr(1).split("&").forEach(function(item) {var k = item.split("=")[0], v = decodeURIComponent(item.split("=")[1]);queryDict[k] = v});
                var item = undefined;
                if("media-index" in queryDict){
                    item = setMediaByIndex(parseInt(queryDict["media-index"]) - 1);
                }
                else if("media-name" in queryDict){
                    item = setMediaByName(queryDict["media-name"]);
                }
                else{
                    item = setMediaByIndex(0);
                }
                if(item != undefined && "trigger-overlay-name" in queryDict){
                    triggerOverlayByName(item, queryDict["trigger-overlay-name"], "trigger-overlay-event" in queryDict ? queryDict["trigger-overlay-event"] : "click");
                }

                player.getById('rootPlayer').bind('tourEnded', function(){
                    onVirtualTourEnded();
                }, player, true);
                
                // Initialize the dynamic button
                initializeDynamicButton();
            }, player, false);

            /* Listen messages */
            window.addEventListener('message', function (e) {
                //Listen to messages for make actions to player in the format function:param1,param2
                var action = e.data;
                if (action == 'pauseTour' || action == 'resumeTour') {
                    this[action].apply(this);
                }
            });
        }

        function initializeDynamicButton() {
            // Create button wrapper
            var btnWrapper = document.createElement('div');
            btnWrapper.id = 'bedroomBtnWrapper';
            btnWrapper.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
            `;
            
            // Create button element
            var btn = document.createElement('button');
            btn.id = 'dynamicBedroomBtn';
            btn.innerHTML = '<span class="btn-icon"></span><span class="btn-text">Son\'s Bedroom</span>';
            btn.style.cssText = `
                position: relative;
                padding: 14px 28px;
                font-size: 16px;
                font-weight: 600;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                border-radius: 50px;
                cursor: pointer;
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 8px;
                outline: none;
            `;
            
            // Add styles for the icon and text
            var style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from {
                        transform: translateX(100px);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                
                @keyframes pulse {
                    0%, 100% {
                        transform: scale(1);
                    }
                    50% {
                        transform: scale(1.05);
                    }
                }
                
                @keyframes ripple {
                    0% {
                        transform: scale(0);
                        opacity: 1;
                    }
                    100% {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
                
                #bedroomBtnWrapper {
                    animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                #dynamicBedroomBtn .btn-icon {
                    font-size: 20px;
                    transition: transform 0.3s ease;
                }
                
                #dynamicBedroomBtn .btn-text {
                    position: relative;
                    z-index: 1;
                }
                
                #dynamicBedroomBtn::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    width: 0;
                    height: 0;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.3);
                    transform: translate(-50%, -50%);
                    transition: width 0.6s, height 0.6s;
                }
                
                #dynamicBedroomBtn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
                }
                
                #dynamicBedroomBtn:hover .btn-icon {
                    transform: rotate(15deg) scale(1.1);
                }
                
                #dynamicBedroomBtn:active {
                    transform: translateY(0);
                    box-shadow: 0 2px 10px rgba(102, 126, 234, 0.4);
                }
                
                #dynamicBedroomBtn.clicked::before {
                    width: 300px;
                    height: 300px;
                }
                
                .scene-transition {
                    animation: pulse 0.4s ease-in-out;
                }
                
                @media (max-width: 768px) {
                    #bedroomBtnWrapper {
                        top: 10px;
                        right: 10px;
                    }
                    #dynamicBedroomBtn {
                        padding: 12px 20px;
                        font-size: 14px;
                    }
                    #dynamicBedroomBtn .btn-icon {
                        font-size: 18px;
                    }
                }
            `;
            document.head.appendChild(style);
            
            // Add click animation
            btn.onclick = function() {
                this.classList.add('clicked');
                setTimeout(() => {
                    this.classList.remove('clicked');
                }, 600);
                handleBedroomButtonClick();
            };
            
            btnWrapper.appendChild(btn);
            document.body.appendChild(btnWrapper);
            
            // Update button based on current scene
            updateBedroomButton();
            
            // Listen for scene changes
            var mainPlayList = player.getById('mainPlayList');
            if (mainPlayList) {
                mainPlayList.bind('change', function() {
                    updateBedroomButton();
                });
            }
        }
        
        function updateBedroomButton() {
            var btn = document.getElementById('dynamicBedroomBtn');
            if (!btn) return;
            
            var currentMedia = getCurrentMedia();
            if (!currentMedia) return;
            
            var mediaLabel = currentMedia.get('label');
            
            // Add transition animation
            btn.classList.add('scene-transition');
            setTimeout(() => {
                btn.classList.remove('scene-transition');
            }, 400);
            
            // Check if we're on Master Bedroom (PAN-SB-2)
            if (mediaLabel === 'PAN-SB-2') {
                btn.innerHTML = '<span class="btn-icon"></span><span class="btn-text">Daughter\'s Bedroom</span>';
                btn.setAttribute('data-target', 'daughters-room');
                btn.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
                btn.style.boxShadow = '0 4px 15px rgba(245, 87, 108, 0.4)';
            } else {
                btn.innerHTML = '<span class="btn-icon"></span><span class="btn-text">Son\'s Bedroom</span>';
                btn.setAttribute('data-target', 'master-bedroom');
                btn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                btn.style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';
            }
        }
        
        function handleBedroomButtonClick() {
            var btn = document.getElementById('dynamicBedroomBtn');
            if (!btn) return;
            
            var target = btn.getAttribute('data-target');
            
            if (target === 'master-bedroom') {
                // Navigate to Master Bedroom (PAN-SB-2, index 7)
                setMediaByIndex(7);
            } else if (target === 'daughters-room') {
                // Navigate to Daughter's Room (PAN-DB-1, index 0)
                setMediaByIndex(0);
            }
        }
        
        function getCurrentMedia() {
            var mainPlayList = player.getById('mainPlayList');
            if (!mainPlayList) return null;
            
            var selectedIndex = mainPlayList.get('selectedIndex');
            if (selectedIndex < 0) return null;
            
            var items = mainPlayList.get('items');
            if (!items || selectedIndex >= items.length) return null;
            
            return items[selectedIndex].get('media');
        }

        function pauseTour()
        {
            isPaused = true;
            if(!isInitialized)
                return;

            var playLists = player.getByClassName('PlayList');
            for(var i = 0, count = playLists.length; i<count; i++)
            {
                var playList = playLists[i];
                var index = playList.get('selectedIndex');
                if(index != -1)
                {
                    var item = playList.get('items')[index];
                    var itemPlayer = item.get('player');
                    if(itemPlayer && itemPlayer.pause)
                    {
                        playersPlayingTmp.push(itemPlayer);
                        itemPlayer.pause();
                    }
                }
            }

            player.getById('pauseGlobalAudios')();
        }

        function resumeTour()
        {
            isPaused = false;
            if(!isInitialized)
                return;

            while(playersPlayingTmp.length)
            {
                var viewer = playersPlayingTmp.pop();
                viewer.play();
            }

            player.getById('resumeGlobalAudios')();
        }

        function onVirtualTourLoaded()
        {
            if(isPaused)
                pauseTour();
        }

        function onVirtualTourEnded()
        {

        }

        function getRootPlayer()
        {
            return window.tdvplayer !== undefined ? window.tdvplayer.getById('rootPlayer') : undefined;
        }

        function setMediaByIndex(index)
        {
            var rootPlayer = getRootPlayer();
            if(rootPlayer !== undefined) {
                return rootPlayer.setMainMediaByIndex(index);
            }
        }

        function setMediaByName(name)
        {
            var rootPlayer = getRootPlayer();
            if(rootPlayer !== undefined) {
                return rootPlayer.setMainMediaByName(name);
            }
        }

        function triggerOverlayByName(item, name, eventName)
        {
            var rootPlayer = getRootPlayer();
            if(rootPlayer !== undefined) {
                item.bind('begin', function(e){
                    item.unbind('begin', arguments.callee, this);
                    var overlay = rootPlayer.getPanoramaOverlayByName(item.get('media'), name);
                    if(overlay)
                        rootPlayer.triggerOverlay(overlay, eventName);
                }, rootPlayer);
            }
        }

        function showPreloader()
        {
            var preloadContainer = document.getElementById('preloadContainer');
            if(preloadContainer != undefined)
                preloadContainer.style.opacity = 1;
        }

        function disposePreloader()
        {
            var preloadContainer = document.getElementById('preloadContainer');
            if(preloadContainer == undefined)
                return;

            var transitionEndName = transitionEndEventName();
            if(transitionEndName)
            {
                preloadContainer.addEventListener(transitionEndName, hide, false);
                preloadContainer.style.opacity = 0;
                setTimeout(hide, 500); //Force hide. Some cases the transitionend event isn't dispatched with an iFrame.
            }
            else
            {
                hide();
            }

            function hide()
            {
                
                preloadContainer.style.visibility = 'hidden';
                preloadContainer.style.display = 'none';
            }

            function transitionEndEventName () {
                var el = document.createElement('div');
                var transitions = {
                        'transition':'transitionend',
                        'OTransition':'otransitionend',
                        'MozTransition':'transitionend',
                        'WebkitTransition':'webkitTransitionEnd'
                    };

                var t;
                for (t in transitions) {
                    if (el.style[t] !== undefined) {
                        return transitions[t];
                    }
                }

                return undefined;
            }
        }

        function onBodyClick(){
            document.body.removeEventListener("click", onBodyClick);
            document.body.removeEventListener("touchend", onBodyClick);
            loadTour();
        }

        function onLoad() {
            if (/AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent))
            {
                var inIFrame = false;
                try
                {
                    inIFrame = (window.self !== window.top);
                }
                catch (e)
                {
                    inIFrame = true;
                }
                if (!inIFrame)
                {
                    var onResize = function(async)
                    {
                        [0, 250, 1000, 2000].forEach(function(delay)
                        {
                            setTimeout(function()
                            {
                                var viewer = document.querySelector('#viewer');
                                var scale = window.innerWidth / document.documentElement.clientWidth;
                                var width = document.documentElement.clientWidth;
                                var height = Math.round(window.innerHeight / scale);
                                viewer.style.width = width + 'px';
                                viewer.style.height = height + 'px';
                                viewer.style.left = Math.round((window.innerWidth - width) * 0.5) + 'px';
                                viewer.style.top = Math.round((window.innerHeight - height) * 0.5) + 'px';
                                viewer.style.transform = 'scale(' + scale + ', ' + scale + ')';
                                window.scrollTo(0,0);
                            }, delay);
                        });
                    };
                    window.addEventListener('resize', onResize);
                    onResize();
                }
            }


            if (isOVRWeb()){
                showPreloader();
                loadTour();
                return;
            }

            document.body.addEventListener("click", onBodyClick);
document.body.addEventListener("touchend", onBodyClick);
showPreloader()
        }

        function playVideo(video) {
            function isSafariDesktopV11orGreater() {
                return /^((?!chrome|android|crios|ipad|iphone).)*safari/i.test(navigator.userAgent) && parseFloat(/Version\/([0-9]+\.[0-9]+)/i.exec(navigator.userAgent)[1]) >= 11;
            }

            function detectUserAction() {
                var onVideoClick = function(e) {
                    if(video.paused) {
                        video.play();
                    }
                    video.muted = false;
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    e.preventDefault();
                    video.removeEventListener('click', onVideoClick);
                    video.removeEventListener('touchend', onVideoClick);
                };
                video.addEventListener("click", onVideoClick);
                video.addEventListener("touchend", onVideoClick);
            }

            if (isSafariDesktopV11orGreater()) {
                video.muted = true;
                video.play();
            } else {
                var canPlay = true;
                var promise = video.play();
                if (promise) {
                    promise.catch(function() {
                        video.muted = true;
                        video.play();
                        detectUserAction();
                    });
                } else {
                    canPlay = false;
                }

                if (!canPlay || video.muted) {
                    detectUserAction();
                }
            }
        }

        function isOVRWeb(){
            return window.location.hash.substring(1).split('&').indexOf('ovrweb') > -1;
        }
    </script>
    <style type="text/css">
        html, body { background-color: #999999;  width: 100%; height: 100%; margin: 0; padding: 0; padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left); }

        #viewer { background-color: #999999; z-index:1; position:absolute; width: 100%; height: 100%; top: 0; }
        #preloadContainer { z-index:2; position:relative; width:100%; height:100%; transition: opacity 0.5s; -webkit-transition: opacity 0.5s; -moz-transition: opacity 0.5s; -o-transition: opacity 0.5s;}
    </style>
    
</head>
<body onload="onLoad()">
    <div id="preloadContainer" style="background-color:rgba(153,153,153,0.63)"><div style="z-index: 4; position: absolute; left: 0%; top: 50%; width: 100.00%; height: 10.00%"><div style="text-align:left; color:#000; "><DIV STYLE="text-align:center;"><SPAN STYLE="letter-spacing:0vmin;color:#000000;font-family:'Segoe UI';"><SPAN STYLE="font-size:2.25vmin;"><B>TWGarden</B></SPAN></SPAN></DIV><DIV STYLE="text-align:center;"><SPAN STYLE="letter-spacing:0vmin;color:#000000;font-family:'Segoe UI';"><SPAN STYLE="font-size:2.25vmin;"><B>Mr. Rakesh singh Thakur</B></SPAN></SPAN></DIV><DIV STYLE="text-align:center;"><SPAN STYLE="letter-spacing:0vmin;color:#000000;font-family:'Segoe UI';"><SPAN STYLE="font-size:2.25vmin;"><B>Flat no. 1 &amp; 2</B></SPAN></SPAN></DIV></div></div><div style="z-index: 5; position: absolute; right: 35.16483516483517%; bottom: 20.518602029312287%; width: 45.73%; height: 5.64%"><div style="text-align:left; color:#000; "><p STYLE="margin:0; line-height:1.11vmin;"><BR STYLE="letter-spacing:0vmin;color:#000000;font-size:1.11vmin;font-family:'Segoe UI';"/></p></div></div></div>
    <div id="viewer"></div>
</body>
</html>